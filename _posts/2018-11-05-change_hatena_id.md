---
title: "【はてなID変更】はてなブログからはてなブログへ引越しする"
date: 2018-11-05
slug: "change_hatena_id"
category: blog
tags: [IT,はてなブログ,日常]
---
<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>は変更できない。。だから引っ越しする！</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%D6%A5%ED%A5%B0">はてなブログ</a>をやっていると、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>を変更したくなるときってありますよね。
でも<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>は変更不可能な項目となっており、どうしても変更したい場合は『退会してから再登録をお願いします。』とのこと。。</p>

<p>そのためアカウントを新規作成して引っ越す必要があります。
これが面倒で諦めた人も多いのではないでしょうか。</p>

<p>しかし覚悟を決めて引っ越ししたら意外と簡単でした！
って言おうとしてたんですけど、めんどうでした。。
特に画像。。。</p>

<p>今回は実施した全手順をまとめておきます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>を変更したい人必見！</p>

<h2>今回の引っ越しポイント</h2>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>を変更したい

<ul>
<li>今回のメインです。旧IDと完全にさようなら！</li>
</ul>
</li>
<li>画像も引っ越したい

<ul>
<li>画像URLにも<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>が含まれているため、新しいURLにするよ！</li>
</ul>
</li>
<li>記事の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DA%A1%BC%A5%B8%A5%E9%A5%F3%A5%AF">ページランク</a>も引き継ぎたい（<a class="keyword" href="http://d.hatena.ne.jp/keyword/SEO">SEO</a>対策）

<ul>
<li>せっかく引越したけどアクセス数が落ちるのは避けたい。記事毎に新URLにリダイレクトします！</li>
</ul>
</li>
</ul>


<h2>引っ越し手順</h2>

<p>※<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>変更前の引越し元を旧ブログ、引越し先を新ブログと呼びます。</p>

<h3>旧ブログから記事データをエクスポートする</h3>

<p>設定→詳細設定→エクスポート→記事のバックアップと製本サービス→エクスポートする</p>

<h3>新ブログのアカウントを作る</h3>

<p>別のメールアドレスで新規アカウントを作成します。
希望の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>にしましょう。（言うまでもありませんが二度と変更できないので注意）
※メールアドレスは後から変更可能です。（引っ越し後に旧ブログのものに変更可能）</p>

<h3>画像データを引っ越す</h3>

<blockquote><p><a href="http://staff.hatenablog.com/entry/2016/08/16/160000">他のサービスからはてなブログに移転する際に、画像データも一緒に引っ越しできるようにしました。これまでのインポートにも有効です</a>
（<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%D6%A5%ED%A5%B0">はてなブログ</a>から<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%D6%A5%ED%A5%B0">はてなブログ</a>への移転を含む）</p></blockquote>

<p>と書いてあったので「超絶楽チンじゃん！」と思ったけど甘かったです。
画像データの移行に旧ブログの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%D5%A5%A9%A5%C8%A5%E9%A5%A4%A5%D5">はてなフォトライフ</a>の画像が出てこない。。
どうやら<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%D5%A5%A9%A5%C8%A5%E9%A5%A4%A5%D5">はてなフォトライフ</a>は対象外な模様。</p>

<h4>画像URLを抽出してダウンロード</h4>

<ul>
<li><a href="http://blog.best-hunt.com/entry/2017/09/05/190000">http://blog.best-hunt.com/entry/2017/09/05/190000</a></li>
<li><a href="http://takiji13.hatenablog.com/entry/2016/04/28/224533">http://takiji13.hatenablog.com/entry/2016/04/28/224533</a></li>
<li><a href="https://qiita.com/daisuke_nomura/items/453a62b2e7fa204c1b89">https://qiita.com/daisuke_nomura/items/453a62b2e7fa204c1b89</a></li>
</ul>


<p>参考サイトいろいろありましたが、結局<a class="keyword" href="http://d.hatena.ne.jp/keyword/rss">rss</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>をコピペして抽出しました。</p>

<p>１. <a class="keyword" href="http://d.hatena.ne.jp/keyword/rss">rss</a>.txt作成</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/rss">rss</a>ページ分のソースを貼り付け</p>

<pre class="code" data-lang="" data-unlink>http://f.hatena.ne.jp/【はてなID】/Hatena%20Blog/rss
http://f.hatena.ne.jp/【はてなID】/Hatena%20Blog/rss?page=2</pre>


<p>２. <a class="keyword" href="http://d.hatena.ne.jp/keyword/grep">grep</a>して画像URL抽出</p>

<pre class="code" data-lang="" data-unlink>grep &#34;https\:\/\/cdn-.*png\|https\:\/\/cdn-.*jpg&#34; -o rss.txt &gt; photo.txt</pre>


<p>３. 不要な行を削除</p>

<p><em>m.jpgや</em>120.jpgなどのサムネイル画像は不要なので削除</p>

<pre class="code" data-lang="" data-unlink>cat photo.txt | grep -v &#34;_m.&#34; | grep -v &#34;_120.&#34; &gt; photo2.txt</pre>


<p>４. 画像ファイルをダウンロード</p>

<pre class="code" data-lang="" data-unlink>wget -i photo.txt -nc --random-wait</pre>


<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%D5%A5%A9%A5%C8%A5%E9%A5%A4%A5%D5">はてなフォトライフ</a>に一括アップロード</h4>

<p>最後に画面から一括アップロードして終わり！と思ったら一度に5個までしかアップできない。。
なにやら<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a>が有効になっていないといけないらしく、下記サイトを参考に対応できました。</p>

<blockquote><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%D5%A5%A9%A5%C8%A5%E9%A5%A4%A5%D5">はてなフォトライフ</a>でアップロードを複数選択できない場合の対処方法
<a href="http://www.ktg6.com/entry/2017/06/04/135458">http://www.ktg6.com/entry/2017/06/04/135458</a>
<a href="https://ktg6.com/2017/06/04/2017-06-04-135458/">https://ktg6.com/2017/06/04/2017-06-04-135458/</a></p>

<p>使用しているブラウザに<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a> Playerがインストールされている必要があるようです。
私の場合、ブラウザに<a class="keyword" href="http://d.hatena.ne.jp/keyword/GoogleChrome">GoogleChrome</a>を使っています。どうやら、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a> Playerの設定が有効になっていなかったので、修正したところ、上手くいきました。</p>

<p>1.最新の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a>プレイヤーをインストールする
2.<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%D5%A5%A9%A5%C8%A5%E9%A5%A4%A5%D5">はてなフォトライフ</a> アップロード画面のアドレスバー マークをクリック
3.<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a>を「許可」にする。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a>がない場合は4を参照
4.サイトの設定から<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a>を「許可」にする</p></blockquote>

<h4>画像を差し替え</h4>

<p>ここでエクスポートした記事データを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C6%A5%AD%A5%B9%A5%C8%A5%A8%A5%C7%A5%A3%A5%BF">テキストエディタ</a>で開いて
画像URLを旧から新に置換していこうかなーとか思ってたのですが、
結局記事インポートしたあとに手動でひとつひとつ編集するのとそんなに手間変わらないなーという感じです。
（そして面倒になり半年がすぎ結局やらないことにしました。みなさんは頑張ってw）</p>

<h3>新ブログにインポートする</h3>

<p>いよいよ記事をインポートします。
旧IDを完全に消すため、エクスポートした記事データを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C6%A5%AD%A5%B9%A5%C8%A5%A8%A5%C7%A5%A3%A5%BF">テキストエディタ</a>で開いて
旧IDを新IDに一括置換しました。
※前述の通り画像はインポート後に差し替えたので画像URLのみ置換対象外としました。</p>

<p><a href="https://blog.hatena.ne.jp/my/import">https://blog.hatena.ne.jp/my/import</a> にアクセスしてインポート。これはかんたん。</p>

<h3>旧ブログから新ブログへリダイレクトする</h3>

<p>本当は301（永続的）リダイレクトしたかったのですが、無料アカウントだと<a class="keyword" href="http://d.hatena.ne.jp/keyword/javascript">javascript</a>のみで対応する必要があり、jsだと301できないので302でいくことにしました。</p>

<h4>旧ブログにjsを実装</h4>

<p>「デザイン設定→カスタマイズ→ヘッダ→タイトル下」に下記をコピペ</p>

<pre class="code" data-lang="" data-unlink>&lt;script
  src=&#34;https://code.jquery.com/jquery-2.2.4.min.js&#34;
  integrity=&#34;sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=&#34;
  crossorigin=&#34;anonymous&#34;&gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34;&gt;
    var domain = &#39;https://aoma23.hatenablog.jp&#39;;　// ←新ブログのURL
    var path = location.pathname;
    var url = domain + path; 

    // canonical書き換え
    $(&#34;link[rel=&#39;canonical&#39;]&#34;).attr(&#39;href&#39;, url);
    
    // リダイレクト
    location.href = url; 

&lt;/script&gt;</pre>


<p>jsによる<a class="keyword" href="http://d.hatena.ne.jp/keyword/canonical">canonical</a>書き換えは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%ED%A1%BC%A5%E9%A1%BC">クローラー</a>が<a href="https://www.suzukikenichi.com/blog/google-only-checks-canonicals-on-the-raw-html-not-the-rendered-one/">処理してくれる</a>とか<a href="https://www.suzukikenichi.com/blog/google-only-checks-canonicals-on-the-raw-html-not-the-rendered-one/">無視される</a>とか諸説ありますが、まぁやっておいて損はないでしょう。</p>

<p>これで旧ブログの記事にアクセスすると新ブログの記事にリダイレクトすることを確認できると思います。</p>

<h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%ED%A1%BC%A5%E9%A1%BC">クローラー</a>がインデクシングし直すのを待つ</h3>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Google%20Search%20Console">Google Search Console</a>でsitemap.<a class="keyword" href="http://d.hatena.ne.jp/keyword/xml">xml</a>を送ってあげるとよいでしょう。</p>

<p>※1ヶ月くらい経過したのですが、いまだに変わらない。。。進展あれば更新します！待ってられないので、もう引っ越し記事公開しちゃう！</p>

<h3>旧ブログ閉鎖</h3>

<p>インデクシングが新URLになれば旧ブログへのアクセスもだいぶ減る（新URLに直アクセスされる）はずですので、
Search Consoleで確認し、問題なければ旧ブログは閉鎖しましょう。
（何か不安な方や思い出を大事にする方は消す必要はありません）</p>

<p>ちなみに<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%D6%A5%ED%A5%B0">はてなブログ</a>の提供している<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%AF%A5%BB%A5%B9%B2%F2%C0%CF">アクセス解析</a>はページ表示後のjsでカウントしているらしく、
リダイレクト処理を入れたタイミングで0になるので注意！</p>

<h3>引っ越し完了！</h3>

<p>お疲れ様でした！<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>変更作業の完了です！</p>

<p>結論として、自分の場合、引っ越し作業はとても面倒で億劫になり、ブログ更新も半年ほど停滞するなどして無駄に時間を使ってしまった感があります。<br/>
（やるぞ！と決めてから11ヶ月も経ってしまった...）</p>

<p>みなさんは私のようにならずサクッと引っ越し完了してくださいね！<br/>
画像URLを無視すればそれほど時間はかかりません！</p>

<p>それではステキな<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAID">はてなID</a>ライフを！</p>

