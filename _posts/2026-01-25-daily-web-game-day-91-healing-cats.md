---
title: "æ¯æ—¥ã‚²ãƒ¼ãƒ ãƒãƒ£ãƒ¬ãƒ³ã‚¸ Day 91: ç™’ã—ã®çŒ«åºƒå ´ (Healing Cat Square)"
categories:
  - game
tags:
  - aomagame
  - 100æ—¥é–“æ¯æ—¥ã‚²ãƒ¼ãƒ ä½œã‚‹äºº
---

ãŠã¯ã“ã‚“ã°ã‚“ã¡ã¯ï¼100æ—¥é–“æ¯æ—¥ã‚²ãƒ¼ãƒ ä½œã‚‹äººã€aomaã§ã™ï¼

91æ—¥ç›®ã¯ã€Œç™’ã—ã®çŒ«åºƒå ´ã€ã€‚
æ¿€ã—ã„æˆ¦ã„ã®å¾Œã¯ã€ã‚‚ãµã‚‚ãµã«ç™’ã‚„ã•ã‚ŒãŸã„ã§ã™ã‚ˆã­ã€‚
çŒ«ã‚’ãªã§ãªã§ã—ã¦ã€ãƒãƒ¼ãƒˆã‚’é›†ã‚ã‚‹ã ã‘ã®å¹³å’Œãªã‚²ãƒ¼ãƒ ã§ã™ã€‚
ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦æ¥½ã—ã‚“ã§ãã ã•ã„ã€‚

<style>
#cat-game {
  width: 100%;
  max-width: 400px;
  margin: 24px auto;
  padding: 20px;
  border-radius: 20px;
  background: linear-gradient(180deg, #fdfbf7 0%, #fff0f5 100%);
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
  text-align: center;
  font-family: "M PLUS Rounded 1c", "Hiragino Maru Gothic Pro", "Rounded Mplus 1c", sans-serif;
  user-select: none;
  position: relative;
  overflow: hidden;
  border: 4px solid #fff;
}

#cat-game h2 {
    margin: 0 0 10px;
    font-size: 1.2rem;
    color: #888;
}

.cat-stage {
    height: 200px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: grab;
}
.cat-stage:active {
    cursor: grabbing;
}

.cat-emoji {
    font-size: 120px;
    transition: transform 0.1s;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
}

.cat-emoji.purr {
    animation: purr 0.2s infinite;
}

@keyframes purr {
    0% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(1px, 1px) scale(1.02); }
    50% { transform: translate(0, 0) scale(1); }
    75% { transform: translate(-1px, 1px) scale(1.02); }
    100% { transform: translate(0, 0) scale(1); }
}

.heart {
    position: absolute;
    pointer-events: none;
    color: #ff6b6b;
    font-size: 24px;
    animation: floatUp 1s forwards;
    opacity: 0;
}

@keyframes floatUp {
    0% { transform: translateY(0) scale(0.5); opacity: 1; }
    50% { opacity: 1; }
    100% { transform: translateY(-50px) scale(1.2); opacity: 0; }
}

.status-panel {
    margin-top: 20px;
    background: #fff;
    padding: 10px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.counter {
    font-size: 1.5rem;
    font-weight: bold;
    color: #ff6b6b;
}

.label {
    font-size: 0.9rem;
    color: #aaa;
}

.collection {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
    flex-wrap: wrap;
}

.cat-btn {
    width: 50px;
    height: 50px;
    font-size: 24px;
    border: 2px solid #eee;
    background: #fff;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.5;
    filter: grayscale(100%);
}

.cat-btn.unlocked {
    opacity: 1;
    filter: grayscale(0%);
    border-color: #ffb7b2;
}

.cat-btn.active {
    background: #fff0f5;
    border-color: #ff6b6b;
    transform: scale(1.1);
}
</style>

<div id="cat-game">
    <h2>ãªã§ãªã§ã—ã¦ç™’ã‚„ã•ã‚Œã‚ˆã†</h2>
    
    <div class="cat-stage" id="cg-stage">
        <div class="cat-emoji" id="cg-cat">ğŸ±</div>
    </div>

    <div class="status-panel">
        <div class="label">Total Love</div>
        <div class="counter" id="cg-score">0</div>
        <div style="font-size: 0.8rem; color: #ccc; margin-top: 4px;">Next Cat: <span id="cg-next">100</span></div>
    </div>

    <div class="collection" id="cg-collection">
        <!-- Buttons generated by JS -->
    </div>
</div>

<script>
const CatGame = (() => {
    const root = document.getElementById('cat-game');
    const catEl = document.getElementById('cg-cat');
    const stage = document.getElementById('cg-stage');
    const scoreEl = document.getElementById('cg-score');
    const nextEl = document.getElementById('cg-next');
    const collectionEl = document.getElementById('cg-collection');
    
    // Game State
    let score = 0;
    let currentCatIndex = 0;
    
    // Configuration
    const cats = [
        { id: 'classic', emoji: 'ğŸ±', unlock: 0, spot: {x:0, y:-0.3}, hint: 'ãŠã§ã“' },
        { id: 'black', emoji: 'ğŸˆâ€â¬›', unlock: 100, spot: {x:0.3, y:0.1}, hint: 'ã»ã£ãº' },
        { id: 'tiger', emoji: 'ğŸ¯', unlock: 200, spot: {x:0, y:0.4}, hint: 'ã‚ã”' },
        { id: 'lion', emoji: 'ğŸ¦', unlock: 300, spot: {x:-0.3, y:-0.3}, hint: 'ãŸã¦ãŒã¿' },
        { id: 'fox', emoji: 'ğŸ¦Š', unlock: 400, spot: {x:0, y:-0.4}, hint: 'è€³' },
        { id: 'paws', emoji: 'ğŸ¾', unlock: 500, spot: {x:0, y:0.1}, hint: 'ã«ããã‚…ã†' },
    ];
    
    // Audio (Simple synth)
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    let audioCtx = null;
    
    function initAudio() {
        if (!audioCtx && AudioContext) {
            audioCtx = new AudioContext();
        }
    }
    
    function playPurr(isSweet) {
        if (!audioCtx) return;
        if (audioCtx.state === 'suspended') audioCtx.resume();
        
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = 'sine';
        
        if (isSweet) {
            // Happy high pitch
            o.frequency.setValueAtTime(500, audioCtx.currentTime); 
            o.frequency.linearRampToValueAtTime(800, audioCtx.currentTime + 0.15);
        } else {
            // Soft fluffy sound
            o.frequency.setValueAtTime(300, audioCtx.currentTime); 
            o.frequency.linearRampToValueAtTime(400, audioCtx.currentTime + 0.1);
        }
        
        g.gain.setValueAtTime(0, audioCtx.currentTime);
        g.gain.linearRampToValueAtTime(isSweet ? 0.1 : 0.05, audioCtx.currentTime + 0.02);
        g.gain.linearRampToValueAtTime(0, audioCtx.currentTime + (isSweet ? 0.15 : 0.1));
        
        o.connect(g);
        g.connect(audioCtx.destination);
        o.start();
        o.stop(audioCtx.currentTime + 0.2);
    }
    
    function playUnlock() {
        if (!audioCtx) return;
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = 'sine';
        o.frequency.setValueAtTime(400, audioCtx.currentTime);
        o.frequency.linearRampToValueAtTime(600, audioCtx.currentTime + 0.1);
        g.gain.setValueAtTime(0.1, audioCtx.currentTime);
        g.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.3);
        o.connect(g);
        g.connect(audioCtx.destination);
        o.start();
        o.stop(audioCtx.currentTime + 0.3);
    }

    // Interaction
    let isPetting = false;
    let petTimer = null;
    let cursorPos = { x: 0, y: 0 }; // Relative to center (-1 to 1)
    
    function updateCursor(clientX, clientY) {
        const rect = catEl.getBoundingClientRect();
        const cx = rect.left + rect.width / 2;
        const cy = rect.top + rect.height / 2;
        
        // Normalize to approx -1 to 1
        // Emoji is roughly square but let's assume 100px radius active area
        const r = 60; 
        cursorPos.x = (clientX - cx) / r;
        cursorPos.y = (clientY - cy) / r;
    }

    function startPet(e) {
        if (e.type === 'mousedown') {
            e.preventDefault(); 
            updateCursor(e.clientX, e.clientY);
        } else if (e.type === 'touchstart') {
            e.preventDefault();
            updateCursor(e.touches[0].clientX, e.touches[0].clientY);
        }
        
        isPetting = true;
        catEl.classList.add('purr');
        initAudio();
        petLoop();
    }
    
    function onMove(e) {
        if (!isPetting) return;
        if (e.type === 'mousemove') {
            updateCursor(e.clientX, e.clientY);
        } else if (e.type === 'touchmove') {
            updateCursor(e.touches[0].clientX, e.touches[0].clientY);
        }
    }
    
    function stopPet() {
        isPetting = false;
        catEl.classList.remove('purr');
        if (petTimer) clearTimeout(petTimer);
    }
    
    function petLoop() {
        if (!isPetting) return;
        
        // Check sweet spot
        const cat = cats[currentCatIndex];
        const dx = cursorPos.x - cat.spot.x;
        const dy = cursorPos.y - cat.spot.y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        const isSweet = dist < 0.3; // Sweet spot radius
        
        score += isSweet ? 5 : 1;
        playPurr(isSweet);
        spawnHeart(isSweet);
        updateUI();
        checkUnlock();
        
        localStorage.setItem('aomagame:healing-cats:score', score);
        
        petTimer = setTimeout(petLoop, 150);
    }
    
    function spawnHeart(isSweet) {
        const heart = document.createElement('div');
        heart.classList.add('heart');
        heart.textContent = isSweet ? 'ğŸ’–' : 'â¤';
        
        const stageRect = stage.getBoundingClientRect();
        const cx = stageRect.width / 2;
        const cy = stageRect.height / 2;
        
        // Spawn near scale 60px radius
        const tx = cx + cursorPos.x * 60;
        const ty = cy + cursorPos.y * 60;
        
        // Add random jitter
        const jx = (Math.random() - 0.5) * 20;
        const jy = (Math.random() - 0.5) * 20;
        
        heart.style.left = (tx + jx - 12) + 'px'; // Center roughly
        heart.style.top = (ty + jy - 12) + 'px';
        
        if (isSweet) {
            heart.style.fontSize = '40px';
            heart.style.zIndex = 10;
        }
        
        stage.appendChild(heart);
        setTimeout(() => heart.remove(), 1000);
    }
    
    function checkUnlock() {
        let changed = false;
        cats.forEach((cat, idx) => {
            const btn = collectionEl.children[idx];
            if (!btn.classList.contains('unlocked') && score >= cat.unlock) {
                btn.classList.add('unlocked');
                playUnlock();
                changed = true;
            }
        });
        
        // Update Next Goal
        const nextCat = cats.find(c => c.unlock > score);
        if (nextCat) {
            nextEl.textContent = `Next at ${nextCat.unlock}`;
        } else {
            nextEl.textContent = "Complete!";
        }
    }
    
    function setCat(index) {
        if (cats[index].unlock > score) return; // Locked
        currentCatIndex = index;
        catEl.textContent = cats[index].emoji;
        
        // Update active class
        Array.from(collectionEl.children).forEach((btn, i) => {
            if (i === index) btn.classList.add('active');
            else btn.classList.remove('active');
        });
        
        localStorage.setItem('aomagame:healing-cats:cat', index);
    }
    
    function updateUI() {
        scoreEl.innerText = score.toLocaleString();
    }
    
    function init() {
        // Load Save
        const savedScore = localStorage.getItem('aomagame:healing-cats:score');
        if (savedScore) score = parseInt(savedScore, 10);
        
        const savedCat = localStorage.getItem('aomagame:healing-cats:cat');
        if (savedCat) currentCatIndex = parseInt(savedCat, 10);
        
        // Build Collection
        collectionEl.innerHTML = '';
        cats.forEach((cat, index) => {
            const btn = document.createElement('div');
            btn.className = 'cat-btn';
            btn.textContent = cat.emoji;
            if (score >= cat.unlock) btn.classList.add('unlocked');
            if (index === currentCatIndex) btn.classList.add('active');
            
            btn.onclick = () => setCat(index);
            collectionEl.appendChild(btn);
        });
        
        setCat(currentCatIndex); // Refresh visual
        updateUI();
        checkUnlock(); // Ensure UI is sync
        
        // Events
        stage.addEventListener('mousedown', startPet);
        stage.addEventListener('touchstart', startPet, { passive: false });
        
        window.addEventListener('mousemove', onMove);
        window.addEventListener('touchmove', onMove, { passive: false });
        
        window.addEventListener('mouseup', stopPet);
        window.addEventListener('touchend', stopPet);
    }
    
    return { init };
})();

// Start
CatGame.init();

// Global play count tracker (standard for aomagame)
// Global play count tracker
function updatePlayCount() {
    const counterEl = document.querySelector('[data-aomagame-play-count]');
    if (!counterEl) return;
    
    // Mark current game as played
    try {
        localStorage.setItem('aomagame:played:healing-cats', '1');
    } catch(e) {}

    try {
        let total = 0;
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && key.startsWith('aomagame:played:')) {
                const val = parseInt(localStorage.getItem(key)||'0', 10);
                if (val > 0) total++;
            }
        }
        counterEl.textContent = total;
    } catch (e) {
        counterEl.textContent = '0';
    }
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', updatePlayCount);
} else {
    updatePlayCount();
}
</script>

## éŠã³æ–¹
1. **ãªã§ã‚‹**: çœŸã‚“ä¸­ã®çŒ«ã¡ã‚ƒã‚“ï¼ˆæœ€åˆã¯ğŸ±ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã€ã¾ãŸã¯é•·æŠ¼ã—ã—ã¦ãªã§ãªã§ã—ã¾ã™ã€‚
2. **ç™’ã‚„ã•ã‚Œã‚‹**: ãªã§ã‚‹ã¨ãƒãƒ¼ãƒˆãŒå‡ºã¦ã€Loveãƒã‚¤ãƒ³ãƒˆãŒè²¯ã¾ã‚Šã¾ã™ã€‚
3. **é›†ã‚ã‚‹**: Loveãƒã‚¤ãƒ³ãƒˆãŒè²¯ã¾ã‚‹ã¨ã€æ–°ã—ã„ä»²é–“ï¼ˆğŸˆâ€â¬›ã‚„ğŸ¯ãªã©ï¼‰ãŒã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚
4. **æ¢ã™**: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã”ã¨ã«ã€Œãªã§ã‚‰ã‚Œã¦æ°—æŒã¡ã„ã„å ´æ‰€ã€ãŒã‚ã‚Šã¾ã™ã€‚ãã“ã‚’ãªã§ã‚‹ã¨ãƒãƒ¼ãƒˆãŒå¤§ããé£›ã³æ•£ã‚Šã¾ã™ï¼

## å®Ÿè£…ãƒ¡ãƒ¢
- é•·æŠ¼ã—ï¼ˆ`mousedown`/`touchstart`ï¼‰ã«ã‚ˆã‚‹é€£ç¶šã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã€‚
- CSSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ã€Œã·ã‚‹ã·ã‚‹ã€éœ‡ãˆã‚‹æ¼”å‡ºã€‚
- `localStorage` ã‚’åˆ©ç”¨ã—ãŸé€²æ—ï¼ˆã‚¹ã‚³ã‚¢ã¨è§£æ”¾çŠ¶æ³ï¼‰ã®è‡ªå‹•ä¿å­˜ã€‚

<p class="game-progress">ã“ã‚Œã¾ã§ã«éŠã‚“ã ã‚²ãƒ¼ãƒ æ•°: <span data-aomagame-play-count>0</span></p>
<p class="game-link"><a href="{{ "/tags/#aomagame" | relative_url }}">ã‚²ãƒ¼ãƒ ä¸€è¦§ã¸</a></p>
